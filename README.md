# TVMazeApp
Визуелно програмирање 2023 проект изработен од: Славчо Карафиловски 213096

#1.
Апликацијата TVMazeApp е апликација која служи за листање и чување фаворит тв-серии. Апликацијата е направена со C# во Windows Forms и го користи TVMazeAPI за добивање на информации поврзани со сериите. Покрај главната форма која има улога на мени има неколку помошни форми односно: форма за листање на резултатите добиени од пребарување, форма за прикажување на фаворит тв-серии, форма за прикажување на серии кои се додадени во "за-глеедање" и "гледани", како и форма за прикажување на деталите за одредена серија. Апликацијата има неколку фунцкионалности, пишувањето на име на некоја серија и притискање на search листа 10 серии кои имаат такво или приближно такво име рангирани по нивниот рејтинг. Со дупли клик на било кое поле од одредена редица се отвара нова форма каде се прикажани подетални информации за една серија, како на пример листата на глумци, листата на епизоди, опис за серијата и слично. Со клик на копчето Add to favorites серија се додава во фаворитите на корисникот а со клик на Add to watch list серија се додава во watch листата на корисникот.

#2.
Апликацијата е имплементирана на следниот начин: 
Составена е од 5 форми: Form1, SearchForm, DetailsForm, FavoritesForm и WatchlistForm.
Form1 е почетната форма која се прикажува кога апликацијата се уклучува, таа има улога на мени, а во позадината преку десеријализација се вчитуваат податоците за Favorites и Watch list. (повеќе детали за ова подоцна) SearchForm е формата која се прикажува кога ќе се внесе валиден search query во почетната форма, на оваа форма се прикажуваат информации кои се добиени со правење на API повик до TvMazeApi за тој search query. Овој API повик враќа листа од JSON објекти кои се парсираат со помош на Newtonsoft додатокот за C# и од нив се креираат Show објекти. Овие објекти се листаат во табела. Двоен-клик на било кое поле од некоја редица во таа табела Ве носи на DetailsForm, каде што се прави нов API повик со id-то од селектираната серија и на DetailsForm се прикажуваат подетални информации за одредена серија.
Како што спомнав во 1. се листаат некои информации за серијата, листа на епизоди, листа на глумци. При клик на копчињата Add to favorites и Add to watchlist целиот објект кој се прикажува моментално во формата DetailsForm се зачувува во листа врз основа на тоа кое копче е притиснато. Ова е изведено преку класа која што служи само за тоа и има 3 статички листи, FAVORITES, WATCHLIST и WATCHEDLIST. При секоја промена на листите се врши серијализација на посебен фајл за секоја листа, овој фајл се вчитува кога се loadira Form1 т.е кога за прв пат се иницијализира апликацијата.
FavoritesForm ја прикажува листата на фаворити тв-серии додадени од корисникот и преку нејзи може да се отвори DetailsForm за некоја од сериите. Истотака одредена серија може да се избрише од оваа листа.
WatchlistForm ги прикажува сериите кои се означени за гледање и означени како гледани. Сериите може во секое време да се носат од едната во другата листа, како и да се избришат. 
Во решението се употребени неколку класи: Ball и Scene се искористени за додавање на Loading state, апликацијата се наоѓа во ваков state додека се чека Api response. 
За листање на сериите и информациите околу нив има неколку класи: Show, ShowDetails, CastMember, Episodes. И последната класа која се користи е FavoritesAndWatchlist во која се наоѓаат трите статички листи кои се користат за Favorites и Watchlist функционалностите споменати погоре.
За апликацијата да функционира потребни беа и два сервиси:
Првиот сервис е класата ApiService која се користи за да се прават Get request-и до Api-то. Преку функциите во оваа класа правиме барања до Api-то, Api-то враќа JSON објекти, кои благодарение на вториот сервис ObjectGeneratorService се претвораат од JSON објекти во објекти од гореспоменатите класи. 

#3.
```
public class FavoritesAndWatchlist
    {
        public static List<ShowDetails> FAVORITES = new List<ShowDetails>();
        public static List<ShowDetails> WATCHLIST = new List<ShowDetails>();
        public static List<ShowDetails> WATCHEDLIST = new List<ShowDetails>();
        
        public static void AddShow(ShowDetails showDetails, List<ShowDetails> list, string path)
        {
            bool found = false;
            foreach(ShowDetails show in list)
            {
                if (show.id == showDetails.id) { found = true; break; }
            }

            if (!found)
            {
                list.Add(showDetails);
                Save(path, list);
            }
        }

        public static void RemoveShow(ShowDetails showDetails, List<ShowDetails> list, string path)
        {
            list.Remove(showDetails); 
            Save(path, list);
        }

        private static void Save(string path, List<ShowDetails> list)
        {
            FileStream fs = new FileStream(path, FileMode.OpenOrCreate);
            IFormatter formatter = new BinaryFormatter();
            formatter.Serialize(fs, list);
            fs.Close();
        }
    }
```
За објаснување на класа ја одбрав FAvoritesAndWatchlist класата поради тоа што благодарение на нејзи може да ја зачуваме состојбата на апликацијата. Класата содржи три статички листи, една за фаворитите, една за листата за гледање и една за листата на изгледани. Класата има само три методи. AddShow методот прима објект од тип ShowDetails, листа и патека.
Објектот кој се прима е тој што треба да се додаде, листата која ја прима како аргумент е енда од трите статички листи на која ќе се додаде објектот и патеката е патеката на фајлот каде треба да се изврши серијализацијата. Доколку ја нема таа серија во листата, истата се додава и потоа се зачувува листата во фајлот кој е наменет за тоа. 
RemoveShow методот е спротивното од AddShow методот, ги прима истите аргументи и го прави тотално спротивното, т.е одредена серија ја брише од листата и потоа ја зачувува истата. Методот Save е класична серијализација каде што како аргументи се даваат патеката на која што треба да се зачува фајлот и која листа да се серијализира во тој фајл. 

#4. 
![image](https://github.com/slavcho-k/TVMazeApp/assets/107281167/8816b437-3332-43d6-8fa7-9e2b8d364a0a)
![image](https://github.com/slavcho-k/TVMazeApp/assets/107281167/ecfc2cc1-b742-4ee1-a37a-56926b563140)
![image](https://github.com/slavcho-k/TVMazeApp/assets/107281167/f3b6f6e4-d21d-47e2-a74f-5d5f65b0b67a)
![image](https://github.com/slavcho-k/TVMazeApp/assets/107281167/96b03c4a-7a79-4d6c-b29f-75cc0647f1c0)
![image](https://github.com/slavcho-k/TVMazeApp/assets/107281167/8930a632-bb08-4e5c-bf4a-2baaf3f97914)

Користењето на апликацијата може да се види на следното видео: 
https://youtu.be/6Iaz4NHKq5I

